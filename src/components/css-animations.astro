---
interface Props {
  children: React.ReactNode;
  animation?: 'fadeIn' | 'slideUp' | 'slideDown' | 'slideLeft' | 'slideRight' | 'scaleIn';
  delay?: number;
  className?: string;
}

const {
  children,
  animation = 'fadeIn',
  delay = 0,
  className = ''
} = Astro.props;

// CSS-only 动画，不需要客户端水合
const getAnimationStyles = () => {
  const baseStyles = `
    opacity: 0;
    animation-fill-mode: forwards;
    animation-duration: 0.6s;
    animation-timing-function: ease-out;
    animation-delay: ${delay}s;
  `;

  switch (animation) {
    case 'fadeIn':
      return `${baseStyles}
        animation-name: fadeIn;
      `;
    case 'slideUp':
      return `${baseStyles}
        animation-name: slideUp;
        transform: translateY(50px);
      `;
    case 'slideDown':
      return `${baseStyles}
        animation-name: slideDown;
        transform: translateY(-50px);
      `;
    case 'slideLeft':
      return `${baseStyles}
        animation-name: slideLeft;
        transform: translateX(50px);
      `;
    case 'slideRight':
      return `${baseStyles}
        animation-name: slideRight;
        transform: translateX(-50px);
      `;
    case 'scaleIn':
      return `${baseStyles}
        animation-name: scaleIn;
        transform: scale(0.8);
      `;
    default:
      return `${baseStyles}
        animation-name: fadeIn;
      `;
  }
};
---

<style>
  @keyframes fadeIn {
    to {
      opacity: 1;
    }
  }

  @keyframes slideUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideDown {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideLeft {
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideRight {
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes scaleIn {
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
</style>

<div class={className} style={getAnimationStyles()}>
  {children}
</div>
