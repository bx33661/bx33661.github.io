---
import Link from '@/components/Link.astro'
import PageHead from '@/components/PageHead.astro'
import { buttonVariants } from '@/components/ui/button'
import Layout from '@/layouts/Layout.astro'
import { FRIEND_LINKS } from '@/consts'
import { Icon } from 'astro-icon/components'

const currentUrl = Astro.url;
---

<Layout canonicalUrl={currentUrl}>
  <PageHead slot="head" title="友情链接 - BX/bpple" />
  <div class="flex flex-col gap-y-12 px-4 py-8 sm:px-8 lg:px-16">
    <!-- 页面标题 -->
    <section class="text-center">
      <h1 class="font-custom text-foreground text-4xl font-extrabold sm:text-5xl">
        友情链接
      </h1>
      <p class="text-muted-foreground text-lg mt-4 max-w-2xl mx-auto">
        这里收录了一些优秀的网站和博客，它们在我的学习和工作中给了我很大的帮助。
        如果您也有优质的网站想要交换友链，欢迎联系我！
      </p>
    </section>

    <!-- 友链申请说明 -->
    <section class="space-y-6">
      <h2 class="font-custom text-foreground text-3xl font-bold">申请友链</h2>
      <div class="bg-muted/50 rounded-lg p-6 space-y-4">
        <p class="text-foreground text-lg">
          欢迎与我交换友链！请确保您的网站符合以下要求：
        </p>
        <ul class="space-y-2 text-muted-foreground">
          <li class="flex items-center gap-2">
            <Icon name="lucide:check" class="size-4 text-green-500" />
            网站内容积极向上，无违法违规内容
          </li>
          <li class="flex items-center gap-2">
            <Icon name="lucide:check" class="size-4 text-green-500" />
            网站能够正常访问，加载速度合理
          </li>
          <li class="flex items-center gap-2">
            <Icon name="lucide:check" class="size-4 text-green-500" />
            优先考虑技术类、学习类博客
          </li>
          <li class="flex items-center gap-2">
            <Icon name="lucide:check" class="size-4 text-green-500" />
            网站有一定的原创内容
          </li>
        </ul>
        <div class="mt-4 p-4 bg-primary/10 rounded-lg">
          <p class="text-foreground font-medium">我的网站信息：</p>
          <div class="mt-2 space-y-1 text-sm text-muted-foreground">
            <p><strong>网站名称：</strong> BX的博客</p>
            <p><strong>网站地址：</strong> https://www.bx33661.com</p>
            <p><strong>网站描述：</strong> 专注于安全研究和技术分享的个人博客</p>
            <p><strong>头像链接：</strong> https://www.bx33661.com/bx.jpg</p>
          </div>
        </div>
      </div>
    </section>

    <!-- 友链列表 -->
    <section class="space-y-6">
      <h2 class="font-custom text-foreground text-3xl font-bold">友链列表</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {
          FRIEND_LINKS.map((friend) => (
            <div class="group relative overflow-hidden rounded-lg border bg-card p-6 transition-all duration-300 hover:shadow-lg hover:scale-105">
              <div class="flex items-start gap-4">
                <div class="relative overflow-hidden rounded-lg shrink-0">
                  {friend.avatar ? (
                    <img 
                      src={friend.avatar} 
                      alt={`${friend.name} logo`}
                      class="h-12 w-12 object-cover transition-transform duration-300 group-hover:scale-110"
                      loading="lazy"
                    />
                  ) : (
                    <div class="h-12 w-12 bg-primary/20 rounded-lg flex items-center justify-center">
                      <Icon name="lucide:globe" class="size-6 text-primary" />
                    </div>
                  )}
                </div>
                <div class="flex-1 min-w-0">
                  <h3 class="font-semibold text-foreground text-lg group-hover:text-primary transition-colors">
                    {friend.name}
                  </h3>
                  <p class="text-muted-foreground text-sm mt-1 line-clamp-2">
                    {friend.description}
                  </p>
                  {friend.tags && (
                    <div class="flex flex-wrap gap-1 mt-3">
                      {friend.tags.map((tag) => (
                        <span class="bg-primary/10 text-primary text-xs px-2 py-1 rounded-full">
                          {tag}
                        </span>
                      ))}
                    </div>
                  )}
                </div>
              </div>
              <Link
                href={friend.url}
                class="absolute inset-0"
                aria-label={`访问 ${friend.name}`}
                target="_blank"
                rel="noopener noreferrer"
              />
              <div class="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity">
                <Icon name="lucide:external-link" class="size-4 text-muted-foreground" />
              </div>
            </div>
          ))
        }
      </div>
    </section>

    <!-- 联系方式 -->
    <section class="space-y-6">
      <h2 class="font-custom text-foreground text-3xl font-bold">联系我</h2>
      <div class="text-center space-y-4">
        <p class="text-muted-foreground text-lg">
          如果您想申请友链或有任何问题，欢迎通过以下方式联系我：
        </p>
        <div class="flex flex-wrap justify-center gap-4">
          <Link
            href="mailto:bx33661@gmail.com"
            class={buttonVariants({ variant: 'outline' }) + ' flex items-center gap-2'}
          >
            <Icon name="lucide:mail" class="size-4" />
            邮箱联系
          </Link>
          <Link
            href="https://github.com/bx33661"
            class={buttonVariants({ variant: 'outline' }) + ' flex items-center gap-2'}
          >
            <Icon name="lucide:github" class="size-4" />
            GitHub
          </Link>
        </div>
        <div class="mt-4 text-sm text-muted-foreground">
          <p>微信: bx33661 | QQ: 1811753380</p>
        </div>
      </div>
    </section>

    <!-- 返回首页 -->
    <div class="flex justify-center pt-8">
      <Link
        href="/"
        class={buttonVariants({ variant: 'default' }) + ' group'}
      >
        <Icon name="lucide:home" class="mr-2 size-4" />
        返回首页
        <span class="ml-2 transition-transform group-hover:translate-x-1">&rarr;</span>
      </Link>
    </div>
  </div>
</Layout>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>