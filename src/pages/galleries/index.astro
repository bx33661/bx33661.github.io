---
import { SITE } from "@/config.ts";
import ArtGallerySlider from "@/components/react/art-gallery-slider";
import { GALLERY_IMAGES, buildGalleryImageSources } from "@/data/gallery";
import "@/styles/art-gallery-slider.css";

// Build image sources with optimized paths
const galleryImages = GALLERY_IMAGES.map((item) => {
  const sources = buildGalleryImageSources(item);
  return {
    src: sources.optimizedSrc,
    alt: item.alt,
    title: item.title,
    date: item.date,
    width: item.width,
    height: item.height,
  };
});
---

<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content={Astro.generator} />
    <title>画廊 | {SITE.title}</title>
    <meta name="description" content="收录项目记录与日常瞬间的图像集合" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="canonical" href={Astro.url.toString()} />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      html, body {
        width: 100%;
        height: 100%;
        overflow: hidden;
        background: #000000;
      }
    </style>
  </head>
  <body>
    {
      galleryImages.length > 0 ? (
        <ArtGallerySlider images={galleryImages} client:load />
      ) : (
        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; color: rgba(255,255,255,0.6); background: #000;">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="48"
            height="48"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
            style="opacity: 0.5; margin-bottom: 1rem;"
          >
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
            <circle cx="9" cy="9" r="2" />
            <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" />
          </svg>
          <p style="font-size: 1.125rem;">暂时还没有图片</p>
        </div>
      )
    }
  </body>
</html>
