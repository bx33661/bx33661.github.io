---
import Layout from '@/layouts/Layout.astro'
import PageHead from '@/components/PageHead.astro'
import { getAllNoteSlugs } from '@/lib/data-utils'

export async function getStaticPaths() {
  const allNoteSlugs = await getAllNoteSlugs()
  const pageSize = 5
  const totalPages = Math.ceil(allNoteSlugs.length / pageSize)

  return Array.from({ length: Math.max(totalPages - 1, 0) }, (_, index) => ({
    params: { page: String(index + 2) },
  }))
}

const page = Astro.params.page
const target = `/notes/list/${page}/`
---

<Layout canonicalUrl={new URL(target, Astro.site)}>
  <PageHead slot="head" title="Redirecting..." noindex={true} />
  <meta http-equiv="refresh" content={`0;url=${target}`} />
  <p>Redirecting to <a href={target}>{target}</a>...</p>
</Layout>
